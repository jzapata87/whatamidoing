{"ast":null,"code":"import _toArray from \"/Users/javierzapata/Developer/whatamidoing/node_modules/@babel/runtime/helpers/esm/toArray\";\nvar _jsxFileName = \"/Users/javierzapata/Developer/whatamidoing/src/User/User.js\";\nimport React from 'react'; //import ChooseActivity from './ChooseActivity';\n\nimport ShowCurrentActivity from './ShowCurrentActivity';\nimport ShowSimilarUsers from './ShowSimilarUsers';\nimport { Socket, Presence } from 'phoenix-socket';\n\nfunction User({\n  usernumber\n}) {\n  const socket = new Socket(\"ws://127.0.0.1:4000/socket\", {\n    params: {\n      user_id: usernumber\n    }\n  });\n  const channel = socket.channel(\"water_cooler:lobby\");\n  let presence = new Presence(channel);\n\n  function renderOnlineUsers(presence) {\n    let response = \"\";\n    presence.list((id, _ref) => {\n      let _ref$metas = _toArray(_ref.metas),\n          first = _ref$metas[0],\n          rest = _ref$metas.slice(1);\n\n      let count = rest.length + 1;\n      response += \"<br>\".concat(id, \" (count: \").concat(count, \")</br>\");\n    });\n    console.log(response, \" presence!!!!\");\n  }\n\n  socket.connect();\n  presence.onSync(() => renderOnlineUsers(presence));\n  channel.join().receive(\"ok\", resp => {\n    console.log(\"Joined successfully\" + usernumber, resp);\n  }).receive(\"error\", resp => {\n    console.log(\"Unable to join\", usernumber);\n  });\n\n  function sendMessage(data) {\n    channel.push('shout', {\n      name: usernumber + \" is \" + data\n    });\n  }\n\n  channel.on('shout', payload => {\n    if (payload.name !== usernumber + \" is here \") {\n      console.log(payload);\n      console.log(\"user \" + usernumber + \" got the message\");\n    }\n  });\n  return React.createElement(\"div\", {\n    className: \"User\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(ShowCurrentActivity, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"ButtonList\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"Choose next activity?\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: () => sendMessage(\"washing\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"Wash\"), React.createElement(\"button\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Exercise\"), React.createElement(\"button\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Study\"), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  })), React.createElement(ShowSimilarUsers, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }));\n}\n\nexport default User;","map":{"version":3,"sources":["/Users/javierzapata/Developer/whatamidoing/src/User/User.js"],"names":["React","ShowCurrentActivity","ShowSimilarUsers","Socket","Presence","User","usernumber","socket","params","user_id","channel","presence","renderOnlineUsers","response","list","id","metas","first","rest","count","length","console","log","connect","onSync","join","receive","resp","sendMessage","data","push","name","on","payload"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,gBAAjC;;AAIA,SAASC,IAAT,CAAc;AAACC,EAAAA;AAAD,CAAd,EAA4B;AAC1B,QAAMC,MAAM,GAAG,IAAIJ,MAAJ,CAAW,4BAAX,EAAyC;AACxDK,IAAAA,MAAM,EAAE;AAACC,MAAAA,OAAO,EAAEH;AAAV;AADgD,GAAzC,CAAf;AAKA,QAAMI,OAAO,GAAGH,MAAM,CAACG,OAAP,CAAe,oBAAf,CAAhB;AACA,MAAIC,QAAQ,GAAG,IAAIP,QAAJ,CAAaM,OAAb,CAAf;;AAEA,WAASE,iBAAT,CAA2BD,QAA3B,EAAqC;AACnC,QAAIE,QAAQ,GAAG,EAAf;AAEAF,IAAAA,QAAQ,CAACG,IAAT,CAAc,CAACC,EAAD,WAAmC;AAAA,qCAA7BC,KAA6B;AAAA,UAArBC,KAAqB;AAAA,UAAXC,IAAW;;AAC/C,UAAIC,KAAK,GAAGD,IAAI,CAACE,MAAL,GAAc,CAA1B;AACAP,MAAAA,QAAQ,kBAAWE,EAAX,sBAAyBI,KAAzB,WAAR;AACD,KAHD;AAKAE,IAAAA,OAAO,CAACC,GAAR,CAAYT,QAAZ,EAAsB,eAAtB;AACD;;AAEDN,EAAAA,MAAM,CAACgB,OAAP;AAEAZ,EAAAA,QAAQ,CAACa,MAAT,CAAgB,MAAMZ,iBAAiB,CAACD,QAAD,CAAvC;AAEAD,EAAAA,OAAO,CAACe,IAAR,GACCC,OADD,CACS,IADT,EACeC,IAAI,IAAI;AAAEN,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAwBhB,UAApC,EAAgDqB,IAAhD;AAAuD,GADhF,EAECD,OAFD,CAES,OAFT,EAEkBC,IAAI,IAAI;AAAEN,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BhB,UAA9B;AAA2C,GAFvE;;AAIA,WAASsB,WAAT,CAAqBC,IAArB,EAA2B;AACzBnB,IAAAA,OAAO,CAACoB,IAAR,CAAa,OAAb,EAAsB;AAACC,MAAAA,IAAI,EAAEzB,UAAU,GAAG,MAAb,GAAsBuB;AAA7B,KAAtB;AACD;;AAEDnB,EAAAA,OAAO,CAACsB,EAAR,CAAW,OAAX,EAAoBC,OAAO,IAAI;AAC3B,QAAIA,OAAO,CAACF,IAAR,KAAiBzB,UAAU,GAAG,WAAlC,EAA8C;AAC5Ce,MAAAA,OAAO,CAACC,GAAR,CAAYW,OAAZ;AACAZ,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAShB,UAAT,GAAsB,kBAAlC;AACD;AAEJ,GAND;AASA,SACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BACuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADvB,EAEE;AAAQ,IAAA,OAAO,EAAE,MAAMsB,WAAW,CAAC,SAAD,CAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aARF,EAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,CAFF,EAiBE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,CADF;AAsBD;;AAED,eAAevB,IAAf","sourcesContent":["import React from 'react';\n//import ChooseActivity from './ChooseActivity';\nimport ShowCurrentActivity from './ShowCurrentActivity';\nimport ShowSimilarUsers from './ShowSimilarUsers';\nimport { Socket, Presence } from 'phoenix-socket';\n\n\n\nfunction User({usernumber}) {\n  const socket = new Socket(\"ws://127.0.0.1:4000/socket\", {\n  params: {user_id: usernumber}\n});\n\n\n  const channel = socket.channel(\"water_cooler:lobby\");\n  let presence = new Presence(channel)\n\n  function renderOnlineUsers(presence) {\n    let response = \"\"\n\n    presence.list((id, {metas: [first, ...rest]}) => {\n      let count = rest.length + 1\n      response += `<br>${id} (count: ${count})</br>`\n    })\n\n    console.log(response, \" presence!!!!\")\n  }\n\n  socket.connect();\n\n  presence.onSync(() => renderOnlineUsers(presence))\n\n  channel.join()\n  .receive(\"ok\", resp => { console.log(\"Joined successfully\" + usernumber, resp) })\n  .receive(\"error\", resp => { console.log(\"Unable to join\", usernumber) })\n\n  function sendMessage(data) {\n    channel.push('shout', {name: usernumber + \" is \" + data})\n  }\n\n  channel.on('shout', payload => {\n      if (payload.name !== usernumber + \" is here \"){\n        console.log(payload)\n        console.log(\"user \"+ usernumber + \" got the message\")\n      }\n\n  })\n\n\n  return (\n    <div className=\"User\">\n      <ShowCurrentActivity/>\n      <div className=\"ButtonList\">\n        Choose next activity?<br/>\n        <button onClick={() => sendMessage(\"washing\")} >\n          Wash\n        </button>\n        <button >\n          Exercise\n        </button>\n        <button >\n          Study\n        </button>\n        <hr/>\n\n\n      </div>\n      <ShowSimilarUsers/>\n\n    </div>\n  );\n}\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}