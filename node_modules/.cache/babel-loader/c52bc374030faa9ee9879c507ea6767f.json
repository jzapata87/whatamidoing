{"ast":null,"code":"var _jsxFileName = \"/Users/javierzapata/Developer/whatamidoing/src/User/User.js\";\nimport React from 'react'; //import ChooseActivity from './ChooseActivity';\n\nimport ShowCurrentActivity from './ShowCurrentActivity';\nimport ShowSimilarUsers from './ShowSimilarUsers';\nimport { Socket, Presence } from 'phoenix-socket';\n\nfunction User({\n  usernumber\n}) {\n  const socket = new Socket(\"ws://127.0.0.1:4000/socket\", {\n    params: {\n      user_id: usernumber\n    }\n  });\n  let channel;\n\n  function sendMessage(data) {\n    Presence.onSync(() => {\n      console.log(presence.list());\n    });\n  }\n\n  function joinRoom(data) {\n    const channel = socket.channel(\"water_cooler:\".concat(data));\n    socket.connect();\n    channel.join().receive(\"ok\", resp => {\n      console.log(\"Joined successfully\" + usernumber, resp);\n    }).receive(\"error\", resp => {\n      console.log(\"Unable to join\", usernumber);\n    });\n    channel.on(\"room:\".concat(data, \":new_message\"), payload => {\n      if (payload.name !== usernumber + \" is here \") {\n        console.log(payload);\n        console.log(\"user \" + usernumber + \" got the message\");\n      }\n    });\n    channel.on('presence_state', presenceState => console.log(presenceState));\n    channel.push('shout', {\n      name: usernumber + \" is \" + data\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"User\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(ShowCurrentActivity, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"ButtonList\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Choose next activity?\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: () => joinRoom(\"washing\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Wash\"), React.createElement(\"button\", {\n    onClick: () => joinRoom(\"dishes\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Dishes\"), React.createElement(\"button\", {\n    onClick: () => joinRoom(\"studying\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Study\"), React.createElement(\"button\", {\n    onClick: sendMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Users\"), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })), React.createElement(ShowSimilarUsers, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }));\n}\n\nexport default User;","map":{"version":3,"sources":["/Users/javierzapata/Developer/whatamidoing/src/User/User.js"],"names":["React","ShowCurrentActivity","ShowSimilarUsers","Socket","Presence","User","usernumber","socket","params","user_id","channel","sendMessage","data","onSync","console","log","presence","list","joinRoom","connect","join","receive","resp","on","payload","name","presenceState","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,gBAAjC;;AAMA,SAASC,IAAT,CAAc;AAACC,EAAAA;AAAD,CAAd,EAA4B;AAE1B,QAAMC,MAAM,GAAG,IAAIJ,MAAJ,CAAW,4BAAX,EAAyC;AACxDK,IAAAA,MAAM,EAAE;AAACC,MAAAA,OAAO,EAAEH;AAAV;AADgD,GAAzC,CAAf;AAIA,MAAII,OAAJ;;AAIA,WAASC,WAAT,CAAqBC,IAArB,EAA2B;AACzBR,IAAAA,QAAQ,CAACS,MAAT,CAAgB,MAAM;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAYC,QAAQ,CAACC,IAAT,EAAZ;AACD,KAFD;AAGD;;AAED,WAASC,QAAT,CAAkBN,IAAlB,EAAwB;AAItB,UAAMF,OAAO,GAAGH,MAAM,CAACG,OAAP,wBAA+BE,IAA/B,EAAhB;AAGAL,IAAAA,MAAM,CAACY,OAAP;AACAT,IAAAA,OAAO,CAACU,IAAR,GACCC,OADD,CACS,IADT,EACeC,IAAI,IAAI;AAAER,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAwBT,UAApC,EAAgDgB,IAAhD;AAAuD,KADhF,EAECD,OAFD,CAES,OAFT,EAEkBC,IAAI,IAAI;AAAER,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BT,UAA9B;AAA2C,KAFvE;AAIAI,IAAAA,OAAO,CAACa,EAAR,gBAAmBX,IAAnB,mBAAuCY,OAAO,IAAI;AAC9C,UAAIA,OAAO,CAACC,IAAR,KAAiBnB,UAAU,GAAG,WAAlC,EAA8C;AAC5CQ,QAAAA,OAAO,CAACC,GAAR,CAAYS,OAAZ;AACAV,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAST,UAAT,GAAsB,kBAAlC;AACD;AAEJ,KAND;AAQAI,IAAAA,OAAO,CAACa,EAAR,CAAW,gBAAX,EAA6BG,aAAa,IAAIZ,OAAO,CAACC,GAAR,CAAYW,aAAZ,CAA9C;AAEAhB,IAAAA,OAAO,CAACiB,IAAR,CAAa,OAAb,EAAsB;AAACF,MAAAA,IAAI,EAAEnB,UAAU,GAAG,MAAb,GAAsBM;AAA7B,KAAtB;AACD;;AAKD,SACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BACuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADvB,EAEE;AAAQ,IAAA,OAAO,EAAE,MAAMM,QAAQ,CAAC,SAAD,CAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,EAKE;AAAQ,IAAA,OAAO,EAAE,MAAMA,QAAQ,CAAC,QAAD,CAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALF,EAQE;AAAQ,IAAA,OAAO,EAAE,MAAMA,QAAQ,CAAC,UAAD,CAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aARF,EAWE;AAAQ,IAAA,OAAO,EAAEP,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAXF,EAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdF,CAFF,EAoBE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApBF,CADF;AAyBD;;AAED,eAAeN,IAAf","sourcesContent":["import React from 'react';\n//import ChooseActivity from './ChooseActivity';\nimport ShowCurrentActivity from './ShowCurrentActivity';\nimport ShowSimilarUsers from './ShowSimilarUsers';\nimport { Socket, Presence } from 'phoenix-socket';\n\n\n\n\n\nfunction User({usernumber}) {\n\n  const socket = new Socket(\"ws://127.0.0.1:4000/socket\", {\n  params: {user_id: usernumber}\n  });\n\n  let channel;\n\n\n\n  function sendMessage(data) {\n    Presence.onSync(() => {\n      console.log(presence.list())\n    })\n  }\n\n  function joinRoom(data) {\n\n\n\n    const channel = socket.channel(`water_cooler:${data}`);\n\n\n    socket.connect();\n    channel.join()\n    .receive(\"ok\", resp => { console.log(\"Joined successfully\" + usernumber, resp) })\n    .receive(\"error\", resp => { console.log(\"Unable to join\", usernumber) })\n\n    channel.on(`room:${data}:new_message`, payload => {\n        if (payload.name !== usernumber + \" is here \"){\n          console.log(payload)\n          console.log(\"user \"+ usernumber + \" got the message\")\n        }\n\n    })\n\n    channel.on('presence_state', presenceState => console.log(presenceState))\n\n    channel.push('shout', {name: usernumber + \" is \" + data})\n  }\n\n\n\n\n  return (\n    <div className=\"User\">\n      <ShowCurrentActivity/>\n      <div className=\"ButtonList\">\n        Choose next activity?<br/>\n        <button onClick={() => joinRoom(\"washing\")} >\n          Wash\n        </button>\n        <button onClick={() => joinRoom(\"dishes\")} >\n          Dishes\n        </button>\n        <button onClick={() => joinRoom(\"studying\")}>\n          Study\n        </button>\n        <button onClick={sendMessage}>\n          Users\n        </button>\n        <hr/>\n\n\n      </div>\n      <ShowSimilarUsers/>\n\n    </div>\n  );\n}\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}