{"ast":null,"code":"var _jsxFileName = \"/Users/javierzapata/Developer/whatamidoing/src/User/User.js\";\nimport React from 'react'; //import ChooseActivity from './ChooseActivity';\n\nimport ShowCurrentActivity from './ShowCurrentActivity';\nimport ShowSimilarUsers from './ShowSimilarUsers';\nimport { Socket, Presence } from 'phoenix-socket';\n\nclass User extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      room: \"\",\n      presence: \"\",\n      channel: null\n    }; // This binding is necessary to make `this` work in the callback\n\n    this.joinRoom = this.joinRoom.bind(this);\n    this.sendMessage = this.sendMessage.bind(this);\n  }\n\n  sendMessage() {\n    const channel = this.state.channel;\n    channel.push('shout', {\n      name: this.props.usernumber + \" is \" + this.state.data\n    });\n  }\n\n  joinRoom(data) {\n    this.setState({\n      data\n    });\n    channel.join().receive(\"ok\", resp => {\n      console.log(\"Joined successfully\" + this.props.usernumber, resp);\n      this.setState({\n        room: data\n      });\n    }).receive(\"error\", resp => {\n      console.log(\"Unable to join\", this.props.usernumber);\n    });\n    channel.on(\"room:\".concat(data, \":new_message\"), payload => {\n      if (payload.name !== this.props.usernumber + \" is here \") {\n        console.log(payload);\n        console.log(\"user \" + this.props.usernumber + \" got the message\");\n      }\n    });\n    channel.on('presence_state', presenceState => console.log(presenceState));\n    channel.push('users', {});\n  }\n\n  componentDidMount() {\n    const socket = new Socket(\"ws://127.0.0.1:4000/socket\", {\n      params: {\n        user_id: this.props.usernumber\n      }\n    });\n    const channel = socket.channel(\"water_cooler:\".concat(data));\n    this.setState({\n      channel: channel\n    });\n    socket.connect();\n  }\n\n  render() {\n    console.log(this.state, \" this.state\");\n    return React.createElement(\"div\", {\n      className: \"User\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(ShowCurrentActivity, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"ButtonList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Choose next activity?\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.joinRoom(\"washing\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Wash\"), React.createElement(\"button\", {\n      onClick: this.joinRoom(\"dishes\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Dishes\"), React.createElement(\"button\", {\n      onClick: this.joinRoom(\"studying\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Study\"), React.createElement(\"button\", {\n      onClick: this.sendMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Send Message\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    })), React.createElement(ShowSimilarUsers, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default User;","map":{"version":3,"sources":["/Users/javierzapata/Developer/whatamidoing/src/User/User.js"],"names":["React","ShowCurrentActivity","ShowSimilarUsers","Socket","Presence","User","Component","constructor","props","state","room","presence","channel","joinRoom","bind","sendMessage","push","name","usernumber","data","setState","join","receive","resp","console","log","on","payload","presenceState","componentDidMount","socket","params","user_id","connect","render"],"mappings":"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","sourcesContent":["import React from 'react';\n//import ChooseActivity from './ChooseActivity';\nimport ShowCurrentActivity from './ShowCurrentActivity';\nimport ShowSimilarUsers from './ShowSimilarUsers';\nimport { Socket, Presence } from 'phoenix-socket';\n\nclass User extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      room: \"\",\n      presence: \"\",\n      channel: null\n    };\n\n    // This binding is necessary to make `this` work in the callback\n    this.joinRoom = this.joinRoom.bind(this);\n    this.sendMessage = this.sendMessage.bind(this);\n  }\n\n  sendMessage() {\n    const { channel } = this.state;\n    channel.push('shout', {name: this.props.usernumber + \" is \" + this.state.data})\n  }\n\n  joinRoom(data) {\n    this.setState({data})\n\n    channel.join()\n    .receive(\"ok\", resp => {\n      console.log(\"Joined successfully\" + this.props.usernumber, resp)\n      this.setState({room: data})\n    })\n    .receive(\"error\", resp => { console.log(\"Unable to join\", this.props.usernumber) })\n\n    channel.on(`room:${data}:new_message`, payload => {\n        if (payload.name !== this.props.usernumber + \" is here \"){\n          console.log(payload)\n          console.log(\"user \"+ this.props.usernumber + \" got the message\")\n        }\n\n    })\n\n    channel.on('presence_state', presenceState => console.log(presenceState))\n\n\n    channel.push('users', {})\n  }\n\n  componentDidMount() {\n    const socket = new Socket(\"ws://127.0.0.1:4000/socket\", {\n    params: {user_id: this.props.usernumber}\n    });\n\n    const channel = socket.channel(`water_cooler:${data}`);\n    this.setState({channel: channel})\n    socket.connect();\n  }\n\n  render() {\n    console.log(this.state, \" this.state\")\n    return (\n      <div className=\"User\">\n        <ShowCurrentActivity/>\n        <div className=\"ButtonList\">\n          Choose next activity?<br/>\n          <button onClick={this.joinRoom(\"washing\")} >\n            Wash\n          </button>\n          <button onClick={this.joinRoom(\"dishes\")} >\n            Dishes\n          </button>\n          <button onClick={this.joinRoom(\"studying\")}>\n            Study\n          </button>\n          <button onClick={this.sendMessage}>\n            Send Message\n          </button>\n          <hr/>\n\n\n        </div>\n        <ShowSimilarUsers/>\n\n      </div>\n    );\n  }\n}\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}